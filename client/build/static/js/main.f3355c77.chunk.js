(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{48:function(e,t,n){},56:function(e,t,n){"use strict";n.r(t);var o=n(2),i=n(1),r=n.n(i),a=n(22),c=n.n(a),s=(n(48),n(12)),l=n(40),u=n.n(l),d=n(15),h=n(41),p=n(33),b="ADD_MESSAGE",f="MESSAGE_RECEIVED",j="ADD_USER",v="USERS_LIST",O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:case f:return[].concat(Object(p.a)(e),[{message:t.message,author:t.author,id:t.id}]);default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return t.user;default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return t.users;default:return e}},x=Object(d.c)({messages:O,users:g,user:m}),y=0,C=function(e,t){var n=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),o=n.NODE_ENV,i=void 0===o?"production":o,r=n.WEBSOCKET_DEV_PORT,a=void 0===r?8989:r,c=location.origin.replace(/^http/,"ws"),s=new WebSocket("production"===i?c:"ws://localhost:".concat(a));return s.onopen=function(){s.send(JSON.stringify({type:j,name:t}))},s.onmessage=function(t){var n,o,i,r,a=JSON.parse(String(t.data));switch(a.type){case b:e((i=a.message,r=a.author,{type:f,id:y++,message:i,author:r}));break;case v:e((o=a.users,{type:v,users:o}));break;case j:e((n=a.user,{type:j,user:n}))}},s},S=Object(h.a)(),w=Object(d.e)(x,Object(d.a)(S)),k=n(20),E=n(4),T=n(9),D="#3B80FE",N="#21374D",M="#E7E7EF",z="#A2AAB3",A="#616470",F="#FFF",P={cursor:"pointer",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitTouchCallout:"none"},W=768,R=E.a.button(Object(T.a)(Object(T.a)({alignItems:"center",backgroundColor:D,border:"none",borderRadius:8,color:F,display:"flex",flexShrink:0,fontSize:16,fontWeight:600,justifyContent:"center",margin:0,outline:"none",padding:16},P),{},{textDecoration:"none",webkitAppearance:"none",mozAppearance:"none"})),I=function(e){var t=e.children,n=e.onClick;return Object(o.jsx)(R,{onClick:n,children:t})},_=n(16),H=n(17),L=n(19),B=n(18),K=n(6),U=n(11),q="portal-with-scroll-prevention-f2e1bc",J=function(e){Array.from(e.classList).forEach((function(t){e.classList.remove(t)}))},Y=function(e){J(e);for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];n.forEach((function(t){e.classList.add(t)}))},V=function(e){Object(L.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(_.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={portalNode:null},e}return Object(H.a)(n,[{key:"componentDidMount",value:function(){null!=document.body&&(this.rootScrollingElement=document.getElementById("root"),this.props.isOpen&&this.addPortalNode())}},{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen?this.addPortalNode():e.isOpen&&!this.props.isOpen?this.removePortalNode():this.updatePortalNode()}},{key:"componentWillUnmount",value:function(){this.props.isOpen&&null!=this.state.portalNode&&this.removePortalNode()}},{key:"addPortalNode",value:function(){var e=document.createElement("div");null!=document.body&&document.body.appendChild(e),this.setState({portalNode:e}),this.updatePortalNode()}},{key:"updatePortalNode",value:function(){var e;null!=this.state.portalNode&&(Y.apply(void 0,[this.state.portalNode].concat(Object(p.a)(null!=this.props.preventScrollClass?[q]:[]),[this.props.portalClass])),null!=this.props.preventScrollClass&&(null===(e=this.rootScrollingElement)||void 0===e||e.classList.add(this.props.preventScrollClass)))}},{key:"removePortalNode",value:function(){var e,t=this;(null!=document.body&&null!=this.state.portalNode&&document.body.removeChild(this.state.portalNode),this.setState({portalNode:null},(function(){null!=t.props.onClose&&t.props.onClose()})),null!=this.props.preventScrollClass&&0===document.querySelectorAll(".".concat(q)).length)&&(null===(e=this.rootScrollingElement)||void 0===e||e.classList.remove(this.props.preventScrollClass))}},{key:"render",value:function(){return this.props.isOpen&&this.state.portalNode&&null!=this.props.children?c.a.createPortal(this.props.children,this.state.portalNode):null}}]),n}(r.a.Component),G={position:"absolute",zIndex:2147483647},Q={overflow:"hidden"};function X(e){var t=e.hasScrollPrevention,n=void 0!==t&&t,o=e.isOpen,i=e.children;return Object(K.b)(U.a,{children:function(e){var t=e.css;return Object(K.b)(V,{isOpen:o,portalClass:t(G),preventScrollClass:n?t(Q):null,children:i})}})}var Z=n(24);function $(){var e=Object(Z.a)(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"]);return $=function(){return e},e}function ee(){var e=Object(Z.a)(["\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"]);return ee=function(){return e},e}var te=300,ne={overlay:{height:"100vh",position:"fixed",zIndex:1,top:0,right:0,bottom:0,left:0,animationName:Object(U.b)(ee()),animationDuration:"300ms",animationFillMode:"forwards",animationTimingFunction:"ease-out",backgroundColor:"rgba(0, 0, 0, 0.4)"},overlayExit:{animationName:Object(U.b)($()),animationDuration:"".concat(te,"ms"),animationFillMode:"forwards",animationTimingFunction:"ease-out"}},oe=function(e){var t=e.animateClose,n=e.children,o=e.onClick,r=Object(i.createRef)();return Object(K.b)("div",{ref:r,css:[ne.overlay,Boolean(t)&&ne.overlayExit],onClick:function(e){e.target===r.current&&o&&o()},children:n})};function ie(){var e=Object(Z.a)(["\n  0% {\n    opacity: 1;\n    transform: scale(1);\n  }\n\n  100% {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n"]);return ie=function(){return e},e}function re(){var e=Object(Z.a)(["\n  0% {\n    opacity: 0;\n    transform: scale(1);\n  }\n\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"]);return re=function(){return e},e}var ae=function(e,t){return t<e},ce=function(e,t){return!ae(e,t)},se=Object(U.b)(re()),le=Object(U.b)(ie()),ue={box:{":-webkit-full-screen-ancestor":{animation:"none",animationFillMode:"none",willChange:"unset"},backgroundColor:F,borderRadius:16,boxShadow:"0 0 24px rgba(0, 0, 0, 0.18)",margin:"auto",animationName:se,animationDuration:"300ms",animationFillMode:"forwards",animationTimingFunction:"ease-out",padding:40,overflow:"hidden",willChange:"transform",WebkitTapHighlightColor:"rgba(0,0,0,0)"},boxExit:{animationName:le,animationDuration:"".concat(te,"ms"),animationFillMode:"forwards",animationTimingFunction:"ease-out"},scrollingContainer:{overflowY:"auto",padding:32,width:"100%",height:"100%",boxSizing:"border-box",WebkitOverflowScrolling:"touch",display:"flex",alignItems:"flex-start",":focus":{outline:"none"}}},de=function(e){Object(L.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(_.a)(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).scrollingContainer=Object(i.createRef)(),e.handleCloseButtonClick=function(){e.props.onClose()},e.handleOverlayClick=function(){e.props.closeOnOverlayTap&&e.props.onClose()},e.handleKeyDown=function(t){t.stopPropagation(),27===t.keyCode&&(t.preventDefault(),e.props.onClose())},e.handleTouchStart=function(t){e.startY=t.touches[0].clientY},e.handleTouchMove=function(t){if(null!=e.scrollingContainer.current){var n=t.touches[0].clientY;e.scrollingContainer.current.scrollHeight!==e.scrollingContainer.current.clientHeight?(0===e.scrollingContainer.current.scrollTop&&ce(e.startY,n)||null!=e.scrollingContainer.current&&e.scrollingContainer.current.scrollTop+e.scrollingContainer.current.clientHeight>=e.scrollingContainer.current.scrollHeight&&ae(e.startY,n))&&t.preventDefault():t.preventDefault()}},e.scrollToTop=function(){var t=e.scrollingContainer.current;null!=t&&t.scrollTo({top:0,behavior:"smooth"})},e}return Object(H.a)(n,[{key:"componentDidMount",value:function(){null!=this.scrollingContainer.current&&this.scrollingContainer.current.focus()}},{key:"render",value:function(){return Object(K.b)(oe,{animateClose:this.props.animateClose,children:Object(K.b)("div",{css:ue.scrollingContainer,ref:this.scrollingContainer,onClick:this.handleOverlayClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,tabIndex:"0",onKeyDown:this.handleKeyDown,children:Object(K.b)("div",{id:"modal",css:[ue.box,Boolean(this.props.animateClose)&&ue.boxExit,{width:this.props.width||600,maxWidth:this.props.width||600}],onClick:function(e){return e.stopPropagation()},children:this.props.children})})})}}]),n}(i.Component);de.defaultProps={closeOnOverlayTap:!1};var he=de,pe=E.a.div({display:"flex",flexDirection:"column"});function be(e){var t=e.children,n=e.isCentered;return Object(K.b)(pe,{css:n?{alignItems:"center",textAlign:"center"}:{},children:t})}var fe=E.a.div((function(e){return Object(T.a)({flexShrink:0,height:e.size,width:e.size},e.grow?{flexGrow:1}:{})}));var je=function(e){var t=e.children,n=e.isCentered,o=void 0!==n&&n;return Object(K.c)(r.a.Fragment,{children:[Object(K.b)(fe,{size:32}),Object(K.b)("div",{css:{display:"flex",justifyContent:o?"center":"flex-start","> a, > button":{minWidth:164}},children:t})]})},ve=function(e){Object(L.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(_.a)(this,n);for(var o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1,animateClose:!1},e.modal=Object(i.createRef)(),e.scrollToTop=function(){var t=e.modal.current;null!=t&&t.scrollToTop()},e.openModal=function(){e.setState((function(e){return Object(T.a)(Object(T.a)({},e),{},{isOpen:!0})}))},e.closeModal=function(){e.setState((function(e){return Object(T.a)(Object(T.a)({},e),{},{animateClose:!0})})),window.setTimeout((function(){e.setState((function(e){return Object(T.a)(Object(T.a)({},e),{},{animateClose:!1,isOpen:!1})})),e.props.onExitAnimationEnd&&e.props.onExitAnimationEnd()}),te)},e}return Object(H.a)(n,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.openModal()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen&&!e.isOpen?this.openModal():!this.props.isOpen&&e.isOpen&&this.closeModal()}},{key:"render",value:function(){return Object(o.jsx)(X,{isOpen:this.state.isOpen,hasScrollPrevention:!0,children:Object(o.jsx)(he,Object(T.a)(Object(T.a)({},this.props),{},{animateClose:this.state.animateClose,ref:this.modal}))})}}]),n}(i.Component);ve.defaultProps={closeOnOverlayTap:!0};var Oe=ve,me=n(38),ge=n.n(me),xe=n(42),ye=ge.a.mark((function e(t){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(xe.a)(b,(function(e){e.author=t.username,t.socket.send(JSON.stringify(e))}));case 2:case"end":return e.stop()}}),e)})),Ce=E.a.div({color:N,fontSize:24,fontWeight:600}),Se=E.a.div({color:N,fontSize:16}),we=E.a.input({width:"100%",height:"100%",outline:"none",padding:12,backgroundColor:M,border:"none",borderRadius:8,textAlign:"center"}),ke=function(){var e=r.a.useState(!0),t=Object(k.a)(e,2),n=t[0],i=t[1],a=r.a.useState(""),c=Object(k.a)(a,2),s=c[0],l=c[1];return Object(o.jsxs)(Oe,{isOpen:n,onClose:function(){},closeOnOverlayTap:!1,children:[Object(o.jsxs)(be,{isCentered:!0,children:[Object(o.jsx)(Ce,{children:"Welcome!"}),Object(o.jsx)(fe,{size:24}),Object(o.jsx)(Se,{children:"What's your name?"}),Object(o.jsx)(fe,{size:20}),Object(o.jsx)(we,{value:s,onChange:function(e){return l(e.target.value)},placeholder:"Enter your name here"})]}),Object(o.jsx)(je,{isCentered:!0,children:Object(o.jsx)(I,{onClick:function(){if(""!==s){i(!1);var e=C(w.dispatch,s);S.run(ye,{socket:e,username:s})}},children:"Submit"})})]})},Ee=function(e){Object(L.a)(n,e);var t=Object(B.a)(n);function n(){var e;Object(_.a)(this,n);for(var o=arguments.length,i=new Array(o),r=0;r<o;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={hasMounted:!1,matches:!1},e.handleMediaQueryChange=function(){null!=e.mql&&e.setState({matches:e.mql.matches})},e}return Object(H.a)(n,[{key:"componentDidMount",value:function(){if(window.matchMedia){var e=this.mql=window.matchMedia(this.props.query);e.addListener(this.handleMediaQueryChange),this.setState((function(){return{matches:e.matches}}))}this.setState((function(){return{hasMounted:!0}}))}},{key:"componentWillUnmount",value:function(){null!=this.mql&&this.mql.removeListener(this.handleMediaQueryChange)}},{key:"render",value:function(){return this.props.children&&this.state.hasMounted?this.props.children(this.state.matches):null}}]),n}(r.a.Component),Te=E.a.div({padding:"".concat(4,"px ").concat(12,"px"),minHeight:36,maxHeight:90,width:"100%",display:"flex",alignItems:"center",transition:"height 0.25s ease",backgroundColor:M,borderRadius:20}),De=E.a.textarea({maxHeight:"100%",width:"100%",outline:"none",padding:0,display:"block",resize:"none",border:"none",backgroundColor:M,transition:"height 0.25s ease"}),Ne=function(e){var t=e.textAreaRef,n=e.placeholder,o=e.text,i=e.onChange,a=e.onKeyPress,c=r.a.useState("auto"),s=Object(k.a)(c,2),l=s[0],u=s[1],d=r.a.useState("auto"),h=Object(k.a)(d,2),p=h[0],b=h[1];r.a.useEffect((function(){if(null!=t.current){var e=t.current.scrollHeight;""===o?(b("auto"),u("auto")):(b("".concat(e+8,"px")),u("".concat(e,"px")))}}),[t,o]);return Object(K.b)(Te,{css:{height:p},children:Object(K.b)(De,{ref:t,placeholder:n,value:o,rows:1,style:{height:l},onChange:function(e){null!=t.current&&(b("".concat(t.current.scrollHeight,"px")),u("auto"),i(e.target.value))},onKeyPress:a})})},Me=n.p+"static/media/send.35a24809.svg",ze=E.a.div({display:"flex",alignItems:"center",padding:20}),Ae=E.a.img(Object(T.a)({height:24,width:24},P)),Fe=Object(s.b)((function(){return function(e){return{user:e.user}}}),(function(e){return{dispatch:function(t,n){e(function(e,t){return{type:b,id:y++,message:e,author:t}}(t,n))}}}))((function(e){var t=r.a.useRef(null),n=r.a.useState(""),i=Object(k.a)(n,2),a=i[0],c=i[1];function s(){var n;null!=t&&(null===(n=t.current)||void 0===n||n.focus());""!==a.trim()&&e.dispatch(a,{id:e.user.id,name:"Me"}),c("")}return Object(o.jsxs)(ze,{children:[Object(o.jsx)(Ne,{textAreaRef:t,placeholder:"Aa",text:a,onChange:function(e){return c(e)},onKeyPress:function(e){"Enter"===e.key&&(e.preventDefault(),s())}}),Object(o.jsx)(fe,{size:12}),Object(o.jsx)(Ae,{src:Me,alt:"Send",onClick:s})]})})),Pe=n(32),We=E.a.div({display:"flex",flexDirection:"column-reverse",borderBottom:"1px solid ".concat(z),marginTop:12,padding:"0 20px 12px 20px",height:"100%",overflow:"auto"}),Re=E.a.div(Object(Pe.a)({padding:12,borderRadius:16,width:"fit-content",maxWidth:400},"@media (max-width: ".concat(W+1,"px)"),{maxWidth:300})),Ie=E.a.div({fontSize:16,fontWeight:600}),_e=E.a.div({fontSize:16}),He=Object(s.b)((function(e){return{messages:e.messages,user:e.user}}),{})((function(e){var t=e.messages,n=e.user;return Object(K.b)(We,{children:Object(K.b)("div",{children:t.map((function(e,o){var i=o>0?t[o-1]:null,a=(null===i||void 0===i?void 0:i.author.id)===e.author.id,c=e.author.id===n.id;return Object(K.c)(r.a.Fragment,{children:[0!==o&&Object(K.b)(fe,{size:a?4:16}),Object(K.c)("div",{css:{display:"flex"},children:[c&&Object(K.b)(fe,{grow:!0,size:16}),Object(K.c)(Re,{css:{backgroundColor:c?D:M,color:c?F:N},children:[!c&&Object(K.c)(K.a,{children:[Object(K.b)(Ie,{children:e.author}),Object(K.b)(fe,{size:4})]}),Object(K.b)(_e,{children:e.message})]})]})]},e.id)}))})})})),Le=E.a.div({padding:24,height:"100%",width:400,borderRight:"1px solid ".concat(z),flexShrink:0}),Be=E.a.div({maxHeight:"100%",overflow:"auto"}),Ke=E.a.div({color:N,fontSize:32,fontWeight:600}),Ue=E.a.div({color:N,fontSize:24}),qe=Object(s.b)((function(e){return{user:e.user,users:e.users}}),{})((function(e){var t,n=e.users,i=e.user;return Object(o.jsxs)(Le,{children:[Object(o.jsxs)(Ke,{children:["Users (",n.length||1,")"]}),Object(o.jsx)(fe,{size:32}),Object(o.jsx)(Ue,{children:null!==(t=null===i||void 0===i?void 0:i.name)&&void 0!==t?t:"You"}),n.length>1&&Object(o.jsx)(fe,{size:12}),Object(o.jsx)(Be,{children:n.map((function(e,t){return Object(o.jsx)(r.a.Fragment,{children:(null===i||void 0===i?void 0:i.id)!==e.id&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Ue,{children:e.name}),t!==n.length-1&&Object(o.jsx)(fe,{size:12})]})},e.id)}))})]})})),Je=E.a.div({height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),Ye=E.a.div({display:"flex",flexDirection:"column",width:"100%",height:"100%"});var Ve=function(){return Object(o.jsxs)(Je,{children:[Object(o.jsx)(qe,{}),Object(o.jsxs)(Ye,{children:[Object(o.jsx)(He,{}),Object(o.jsx)(Fe,{})]})]})},Ge=n.p+"static/media/logo.cf7d5d26.svg",Qe=E.a.div({position:"fixed",top:0,left:0,borderBottom:"".concat(1,"px solid ").concat(z),padding:16,width:"100%",display:"flex",alignItems:"center",backgroundColor:F}),Xe=E.a.img({height:32,width:32}),Ze=E.a.div({color:A,fontSize:14}),$e=Object(s.b)((function(e){return{users:e.users}}),{})((function(e){var t=e.users;return Object(o.jsxs)(Qe,{children:[Object(o.jsx)(Xe,{src:Ge,alt:"Logo"}),Object(o.jsx)(fe,{grow:!0,size:8}),Object(o.jsxs)(Ze,{children:["Active users: ",t.length]})]})})),et=E.a.div({paddingTop:64,width:"100%",height:"100%",display:"flex",flexDirection:"column"});var tt=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)($e,{}),Object(o.jsxs)(et,{children:[Object(o.jsx)(He,{}),Object(o.jsx)(Fe,{})]})]})};var nt=function(){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(ke,{}),Object(o.jsx)(Ee,{query:"(min-width: ".concat(W+1,"px)"),children:function(e){return e?Object(o.jsx)(Ve,{}):Object(o.jsx)(tt,{})}})]})},ot=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),o(e),i(e),r(e),a(e)}))};u.a.load({google:{families:["Jost:400","Jost:500","Jost:600","sans-serif"]}}),c.a.render(Object(o.jsx)(s.a,{store:w,children:Object(o.jsx)(nt,{})}),document.getElementById("root")),ot()}},[[56,1,2]]]);
//# sourceMappingURL=main.f3355c77.chunk.js.map