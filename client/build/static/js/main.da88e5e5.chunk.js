(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{47:function(e,n,t){},55:function(e,n,t){"use strict";t.r(n);var o=t(3),r=t(1),i=t.n(r),a=t(17),c=t.n(a),s=(t(47),t(15)),l=t(39),u=t.n(l),d=t(14),h=t(40),p=t(32),b="ADD_MESSAGE",f="MESSAGE_RECEIVED",O="USERS_LIST",v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case b:case f:return[].concat(Object(p.a)(e),[{message:n.message,author:n.author,id:n.id}]);default:return e}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case O:return n.users;default:return e}},m=Object(d.c)({messages:v,users:j}),g=0,C=function(e,n){var t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),o=t.NODE_ENV,r=void 0===o?"production":o,i=t.WEBSOCKET_DEV_PORT,a=void 0===i?8989:i,c=location.origin.replace(/^http/,"ws"),s=new WebSocket("production"===r?c:"ws://localhost:".concat(a));return s.onopen=function(){s.send(JSON.stringify({type:"ADD_USER",name:n}))},s.onmessage=function(n){var t,o,r,i=JSON.parse(String(n.data));switch(i.type){case b:e((o=i.message,r=i.author,{type:f,id:g++,message:o,author:r}));break;case O:e((t=i.users,{type:O,users:t}))}},s},y=Object(h.a)(),x=Object(d.e)(m,Object(d.a)(y)),S=t(6),w=t(26),k="#3B80FE",E="#21374D",T="#E7E7EF",D="#A2AAB3",N="#FFF",F=S.a.div({padding:20,height:200}),P=S.a.textarea({width:"100%",height:"100%",outline:"none",padding:8,resize:"none",backgroundColor:T,border:"none",borderRadius:8}),z=Object(s.b)((function(){return{}}),(function(e){return{dispatch:function(n,t){e(function(e,n){return{type:b,id:g++,message:e,author:n}}(n,t))}}}))((function(e){var n=i.a.useState(""),t=Object(w.a)(n,2),r=t[0],a=t[1];return Object(o.jsx)(F,{children:Object(o.jsx)(P,{placeholder:"Aa",value:r,onChange:function(e){return a(e.target.value)},onKeyPress:function(n){"Enter"===n.key&&(n.preventDefault(),e.dispatch(r,"Me"),a(""))}})})})),A=t(9),M=t(19),W=t(20),R=t(22),_=t(21),I=t(5),B=t(11),H="portal-with-scroll-prevention-f2e1bc",L=function(e){Array.from(e.classList).forEach((function(n){e.classList.remove(n)}))},J=function(e){L(e);for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];t.forEach((function(n){e.classList.add(n)}))},K=function(e){Object(R.a)(t,e);var n=Object(_.a)(t);function t(){var e;Object(M.a)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).state={portalNode:null},e}return Object(W.a)(t,[{key:"componentDidMount",value:function(){null!=document.body&&(this.rootScrollingElement=document.getElementById("root"),this.props.isOpen&&this.addPortalNode())}},{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen?this.addPortalNode():e.isOpen&&!this.props.isOpen?this.removePortalNode():this.updatePortalNode()}},{key:"componentWillUnmount",value:function(){this.props.isOpen&&null!=this.state.portalNode&&this.removePortalNode()}},{key:"addPortalNode",value:function(){var e=document.createElement("div");null!=document.body&&document.body.appendChild(e),this.setState({portalNode:e}),this.updatePortalNode()}},{key:"updatePortalNode",value:function(){var e;null!=this.state.portalNode&&(J.apply(void 0,[this.state.portalNode].concat(Object(p.a)(null!=this.props.preventScrollClass?[H]:[]),[this.props.portalClass])),null!=this.props.preventScrollClass&&(null===(e=this.rootScrollingElement)||void 0===e||e.classList.add(this.props.preventScrollClass)))}},{key:"removePortalNode",value:function(){var e,n=this;(null!=document.body&&null!=this.state.portalNode&&document.body.removeChild(this.state.portalNode),this.setState({portalNode:null},(function(){null!=n.props.onClose&&n.props.onClose()})),null!=this.props.preventScrollClass&&0===document.querySelectorAll(".".concat(H)).length)&&(null===(e=this.rootScrollingElement)||void 0===e||e.classList.remove(this.props.preventScrollClass))}},{key:"render",value:function(){return this.props.isOpen&&this.state.portalNode&&null!=this.props.children?c.a.createPortal(this.props.children,this.state.portalNode):null}}]),t}(i.a.Component),U={position:"absolute",zIndex:2147483647},Y={overflow:"hidden"};function V(e){var n=e.hasScrollPrevention,t=void 0!==n&&n,o=e.isOpen,r=e.children;return Object(I.b)(B.a,{children:function(e){var n=e.css;return Object(I.b)(K,{isOpen:o,portalClass:n(U),preventScrollClass:t?n(Y):null,children:r})}})}var G=t(23);function q(){var e=Object(G.a)(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"]);return q=function(){return e},e}function Q(){var e=Object(G.a)(["\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"]);return Q=function(){return e},e}var X=300,Z={overlay:{height:"100vh",position:"fixed",zIndex:1,top:0,right:0,bottom:0,left:0,animationName:Object(B.b)(Q()),animationDuration:"300ms",animationFillMode:"forwards",animationTimingFunction:"ease-out",backgroundColor:"rgba(0, 0, 0, 0.4)"},overlayExit:{animationName:Object(B.b)(q()),animationDuration:"".concat(X,"ms"),animationFillMode:"forwards",animationTimingFunction:"ease-out"}},$=function(e){var n=e.animateClose,t=e.children,o=e.onClick,i=Object(r.createRef)();return Object(I.b)("div",{ref:i,css:[Z.overlay,Boolean(n)&&Z.overlayExit],onClick:function(e){e.target===i.current&&o&&o()},children:t})};function ee(){var e=Object(G.a)(["\n  0% {\n    opacity: 1;\n    transform: scale(1);\n  }\n\n  100% {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n"]);return ee=function(){return e},e}function ne(){var e=Object(G.a)(["\n  0% {\n    opacity: 0;\n    transform: scale(1);\n  }\n\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"]);return ne=function(){return e},e}var te=function(e,n){return n<e},oe=function(e,n){return!te(e,n)},re=Object(B.b)(ne()),ie=Object(B.b)(ee()),ae={box:{":-webkit-full-screen-ancestor":{animation:"none",animationFillMode:"none",willChange:"unset"},backgroundColor:N,borderRadius:16,boxShadow:"0 0 24px rgba(0, 0, 0, 0.18)",margin:"auto",animationName:re,animationDuration:"300ms",animationFillMode:"forwards",animationTimingFunction:"ease-out",padding:40,overflow:"hidden",willChange:"transform",WebkitTapHighlightColor:"rgba(0,0,0,0)"},boxExit:{animationName:ie,animationDuration:"".concat(X,"ms"),animationFillMode:"forwards",animationTimingFunction:"ease-out"},scrollingContainer:{overflowY:"auto",padding:32,width:"100%",height:"100%",boxSizing:"border-box",WebkitOverflowScrolling:"touch",display:"flex",alignItems:"flex-start",":focus":{outline:"none"}}},ce=function(e){Object(R.a)(t,e);var n=Object(_.a)(t);function t(){var e;Object(M.a)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).scrollingContainer=Object(r.createRef)(),e.handleCloseButtonClick=function(){e.props.onClose()},e.handleOverlayClick=function(){e.props.closeOnOverlayTap&&e.props.onClose()},e.handleKeyDown=function(n){n.stopPropagation(),27===n.keyCode&&(n.preventDefault(),e.props.onClose())},e.handleTouchStart=function(n){e.startY=n.touches[0].clientY},e.handleTouchMove=function(n){if(null!=e.scrollingContainer.current){var t=n.touches[0].clientY;e.scrollingContainer.current.scrollHeight!==e.scrollingContainer.current.clientHeight?(0===e.scrollingContainer.current.scrollTop&&oe(e.startY,t)||null!=e.scrollingContainer.current&&e.scrollingContainer.current.scrollTop+e.scrollingContainer.current.clientHeight>=e.scrollingContainer.current.scrollHeight&&te(e.startY,t))&&n.preventDefault():n.preventDefault()}},e.scrollToTop=function(){var n=e.scrollingContainer.current;null!=n&&n.scrollTo({top:0,behavior:"smooth"})},e}return Object(W.a)(t,[{key:"componentDidMount",value:function(){null!=this.scrollingContainer.current&&this.scrollingContainer.current.focus()}},{key:"render",value:function(){return Object(I.b)($,{animateClose:this.props.animateClose,children:Object(I.b)("div",{css:ae.scrollingContainer,ref:this.scrollingContainer,onClick:this.handleOverlayClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,tabIndex:"0",onKeyDown:this.handleKeyDown,children:Object(I.b)("div",{id:"modal",css:[ae.box,Boolean(this.props.animateClose)&&ae.boxExit,{width:this.props.width||600,maxWidth:this.props.width||600}],onClick:function(e){return e.stopPropagation()},children:this.props.children})})})}}]),t}(r.Component);ce.defaultProps={closeOnOverlayTap:!1};var se=ce,le=S.a.div({display:"flex",flexDirection:"column"});function ue(e){var n=e.children,t=e.isCentered;return Object(I.b)(le,{css:t?{alignItems:"center",textAlign:"center"}:{},children:n})}var de=S.a.div((function(e){return Object(A.a)({flexShrink:0,height:e.size,width:e.size},e.grow?{flexGrow:1}:{})}));var he=function(e){var n=e.children,t=e.isCentered,o=void 0!==t&&t;return Object(I.c)(i.a.Fragment,{children:[Object(I.b)(de,{size:40}),Object(I.b)("div",{css:{display:"flex",justifyContent:o?"center":"flex-start","> a, > button":{minWidth:164}},children:n})]})},pe=function(e){Object(R.a)(t,e);var n=Object(_.a)(t);function t(){var e;Object(M.a)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).state={isOpen:!1,animateClose:!1},e.modal=Object(r.createRef)(),e.scrollToTop=function(){var n=e.modal.current;null!=n&&n.scrollToTop()},e.openModal=function(){e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{isOpen:!0})}))},e.closeModal=function(){e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{animateClose:!0})})),window.setTimeout((function(){e.setState((function(e){return Object(A.a)(Object(A.a)({},e),{},{animateClose:!1,isOpen:!1})})),e.props.onExitAnimationEnd&&e.props.onExitAnimationEnd()}),X)},e}return Object(W.a)(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.openModal()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen&&!e.isOpen?this.openModal():!this.props.isOpen&&e.isOpen&&this.closeModal()}},{key:"render",value:function(){return Object(o.jsx)(V,{isOpen:this.state.isOpen,hasScrollPrevention:!0,children:Object(o.jsx)(se,Object(A.a)(Object(A.a)({},this.props),{},{animateClose:this.state.animateClose,ref:this.modal}))})}}]),t}(r.Component);pe.defaultProps={closeOnOverlayTap:!0};var be=pe,fe=S.a.button(Object(A.a)(Object(A.a)({alignItems:"center",backgroundColor:k,border:"none",borderRadius:8,color:N,display:"flex",flexShrink:0,fontSize:16,fontWeight:600,justifyContent:"center",margin:0,outline:"none",padding:16},{cursor:"pointer",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitTouchCallout:"none"}),{},{textDecoration:"none",webkitAppearance:"none",mozAppearance:"none"})),Oe=function(e){var n=e.children,t=e.onClick;return Object(o.jsx)(fe,{onClick:t,children:n})},ve=t(37),je=t.n(ve),me=t(41),ge=je.a.mark((function e(n){return je.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(me.a)(b,(function(e){e.author=n.username,n.socket.send(JSON.stringify(e))}));case 2:case"end":return e.stop()}}),e)})),Ce=S.a.div({color:E,fontSize:32,fontWeight:600}),ye=S.a.div({color:E,fontSize:20}),xe=S.a.input({width:"100%",height:"100%",outline:"none",padding:12,backgroundColor:T,border:"none",borderRadius:8,textAlign:"center"}),Se=function(){var e=i.a.useState(!0),n=Object(w.a)(e,2),t=n[0],r=n[1],a=i.a.useState(""),c=Object(w.a)(a,2),s=c[0],l=c[1];return Object(o.jsxs)(be,{isOpen:t,onClose:function(){},closeOnOverlayTap:!1,children:[Object(o.jsxs)(ue,{isCentered:!0,children:[Object(o.jsx)(Ce,{children:"Welcome!"}),Object(o.jsx)(de,{size:24}),Object(o.jsx)(ye,{children:"What's your name?"}),Object(o.jsx)(de,{size:20}),Object(o.jsx)(xe,{value:s,onChange:function(e){return l(e.target.value)},placeholder:"Enter your name here"})]}),Object(o.jsx)(he,{isCentered:!0,children:Object(o.jsx)(Oe,{onClick:function(){if(""!==s){r(!1);var e=C(x.dispatch,s);y.run(ge,{socket:e,username:s})}},children:"Submit"})})]})},we=S.a.div({borderBottom:"1px solid ".concat(D),padding:20,height:"100%",overflow:"auto"}),ke=S.a.div({padding:12,borderRadius:16,width:"fit-content",maxWidth:400}),Ee=S.a.div({fontSize:16,fontWeight:600}),Te=S.a.div({fontSize:16}),De=Object(s.b)((function(e){return{messages:e.messages}}),{})((function(e){var n=e.messages;return Object(I.b)(we,{children:n.map((function(e,n){var t="Me"===e.author;return Object(I.c)(i.a.Fragment,{children:[0!==n&&Object(I.b)(de,{size:t?4:16}),Object(I.c)("div",{css:{display:"flex"},children:[t&&Object(I.b)(de,{grow:!0,size:16}),Object(I.c)(ke,{css:{backgroundColor:t?k:T,color:t?N:E},children:[!t&&Object(I.c)(I.a,{children:[Object(I.b)(Ee,{children:e.author}),Object(I.b)(de,{size:8})]}),Object(I.b)(Te,{children:e.message})]})]})]},e.id)}))})})),Ne=S.a.div({padding:24,height:"100%",width:400,borderRight:"1px solid ".concat(D),flexShrink:0}),Fe=S.a.div({maxHeight:"100%",overflow:"auto"}),Pe=S.a.div({color:E,fontSize:32,fontWeight:600}),ze=S.a.div({color:E,fontSize:24}),Ae=Object(s.b)((function(e){return{users:e.users}}),{})((function(e){var n=e.users;return Object(o.jsxs)(Ne,{children:[Object(o.jsxs)(Pe,{children:["Users (",n.length,")"]}),Object(o.jsx)(de,{size:32}),Object(o.jsx)(Fe,{children:n.map((function(e,n){return Object(o.jsxs)(i.a.Fragment,{children:[0!==n&&Object(o.jsx)(de,{size:12}),Object(o.jsx)(ze,{children:e.name})]},"".concat(e.name,"-").concat(n))}))})]})})),Me=S.a.div({height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),We=S.a.div({display:"flex",flexDirection:"column",width:"100%",height:"100%"});var Re=function(){return Object(o.jsxs)(Me,{children:[Object(o.jsx)(Se,{}),Object(o.jsx)(Ae,{}),Object(o.jsxs)(We,{children:[Object(o.jsx)(De,{}),Object(o.jsx)(z,{})]})]})},_e=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,56)).then((function(n){var t=n.getCLS,o=n.getFID,r=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),o(e),r(e),i(e),a(e)}))};u.a.load({google:{families:["Jost:400","Jost:500","Jost:600","sans-serif"]}}),c.a.render(Object(o.jsx)(s.a,{store:x,children:Object(o.jsx)(Re,{})}),document.getElementById("root")),_e()}},[[55,1,2]]]);
//# sourceMappingURL=main.da88e5e5.chunk.js.map