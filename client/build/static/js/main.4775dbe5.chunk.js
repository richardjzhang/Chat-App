(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{47:function(e,n,t){},55:function(e,n,t){"use strict";t.r(n);var o=t(3),r=t(1),i=t.n(r),a=t(17),c=t.n(a),s=(t(47),t(15)),l=t(39),u=t.n(l),d=t(14),h=t(40),p=t(32),b="ADD_MESSAGE",f="MESSAGE_RECEIVED",v="ADD_USER",O="USERS_LIST",j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case b:case f:return[].concat(Object(p.a)(e),[{message:n.message,author:n.author,id:n.id}]);default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v:return n.user;default:return e}},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case O:return n.users;default:return e}},C=Object(d.c)({messages:j,users:g,user:m}),x=0,y=function(e,n){var t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),o=t.NODE_ENV,r=void 0===o?"production":o,i=t.WEBSOCKET_DEV_PORT,a=void 0===i?8989:i,c=location.origin.replace(/^http/,"ws"),s=new WebSocket("production"===r?c:"ws://localhost:".concat(a));return s.onopen=function(){s.send(JSON.stringify({type:v,name:n}))},s.onmessage=function(n){var t,o,r,i,a=JSON.parse(String(n.data));switch(a.type){case b:e((r=a.message,i=a.author,{type:f,id:x++,message:r,author:i}));break;case O:e((o=a.users,{type:O,users:o}));break;case v:e((t=a.user,{type:v,user:t}))}},s},S=Object(h.a)(),w=Object(d.e)(C,Object(d.a)(S)),k=t(6),E=t(26),T="#3B80FE",D="#21374D",N="#E7E7EF",F="#A2AAB3",z="#FFF",P=k.a.div({padding:20,height:200}),A=k.a.textarea({width:"100%",height:"100%",outline:"none",padding:8,resize:"none",backgroundColor:N,border:"none",borderRadius:8}),M=Object(s.b)((function(){return function(e){return{user:e.user}}}),(function(e){return{dispatch:function(n,t){e(function(e,n){return{type:b,id:x++,message:e,author:n}}(n,t))}}}))((function(e){var n=i.a.useState(""),t=Object(E.a)(n,2),r=t[0],a=t[1];return Object(o.jsx)(P,{children:Object(o.jsx)(A,{placeholder:"Aa",value:r,onChange:function(e){return a(e.target.value)},onKeyPress:function(n){var t=r.trim();"Enter"===n.key&&(n.preventDefault(),""!==t&&e.dispatch(r,{id:e.user.id,name:"Me"}),a(""))}})})})),W=t(9),R=t(19),_=t(20),I=t(22),B=t(21),H=t(5),L=t(11),J="portal-with-scroll-prevention-f2e1bc",K=function(e){Array.from(e.classList).forEach((function(n){e.classList.remove(n)}))},U=function(e){K(e);for(var n=arguments.length,t=new Array(n>1?n-1:0),o=1;o<n;o++)t[o-1]=arguments[o];t.forEach((function(n){e.classList.add(n)}))},Y=function(e){Object(I.a)(t,e);var n=Object(B.a)(t);function t(){var e;Object(R.a)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=n.call.apply(n,[this].concat(r))).state={portalNode:null},e}return Object(_.a)(t,[{key:"componentDidMount",value:function(){null!=document.body&&(this.rootScrollingElement=document.getElementById("root"),this.props.isOpen&&this.addPortalNode())}},{key:"componentDidUpdate",value:function(e){!e.isOpen&&this.props.isOpen?this.addPortalNode():e.isOpen&&!this.props.isOpen?this.removePortalNode():this.updatePortalNode()}},{key:"componentWillUnmount",value:function(){this.props.isOpen&&null!=this.state.portalNode&&this.removePortalNode()}},{key:"addPortalNode",value:function(){var e=document.createElement("div");null!=document.body&&document.body.appendChild(e),this.setState({portalNode:e}),this.updatePortalNode()}},{key:"updatePortalNode",value:function(){var e;null!=this.state.portalNode&&(U.apply(void 0,[this.state.portalNode].concat(Object(p.a)(null!=this.props.preventScrollClass?[J]:[]),[this.props.portalClass])),null!=this.props.preventScrollClass&&(null===(e=this.rootScrollingElement)||void 0===e||e.classList.add(this.props.preventScrollClass)))}},{key:"removePortalNode",value:function(){var e,n=this;(null!=document.body&&null!=this.state.portalNode&&document.body.removeChild(this.state.portalNode),this.setState({portalNode:null},(function(){null!=n.props.onClose&&n.props.onClose()})),null!=this.props.preventScrollClass&&0===document.querySelectorAll(".".concat(J)).length)&&(null===(e=this.rootScrollingElement)||void 0===e||e.classList.remove(this.props.preventScrollClass))}},{key:"render",value:function(){return this.props.isOpen&&this.state.portalNode&&null!=this.props.children?c.a.createPortal(this.props.children,this.state.portalNode):null}}]),t}(i.a.Component),V={position:"absolute",zIndex:2147483647},G={overflow:"hidden"};function q(e){var n=e.hasScrollPrevention,t=void 0!==n&&n,o=e.isOpen,r=e.children;return Object(H.b)(L.a,{children:function(e){var n=e.css;return Object(H.b)(Y,{isOpen:o,portalClass:n(V),preventScrollClass:t?n(G):null,children:r})}})}var Q=t(23);function X(){var e=Object(Q.a)(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"]);return X=function(){return e},e}function Z(){var e=Object(Q.a)(["\n  0% {\n    opacity: 0;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"]);return Z=function(){return e},e}var $=300,ee={overlay:{height:"100vh",position:"fixed",zIndex:1,top:0,right:0,bottom:0,left:0,animationName:Object(L.b)(Z()),animationDuration:"300ms",animationFillMode:"forwards",animationTimingFunction:"ease-out",backgroundColor:"rgba(0, 0, 0, 0.4)"},overlayExit:{animationName:Object(L.b)(X()),animationDuration:"".concat($,"ms"),animationFillMode:"forwards",animationTimingFunction:"ease-out"}},ne=function(e){var n=e.animateClose,t=e.children,o=e.onClick,i=Object(r.createRef)();return Object(H.b)("div",{ref:i,css:[ee.overlay,Boolean(n)&&ee.overlayExit],onClick:function(e){e.target===i.current&&o&&o()},children:t})};function te(){var e=Object(Q.a)(["\n  0% {\n    opacity: 1;\n    transform: scale(1);\n  }\n\n  100% {\n    opacity: 0;\n    transform: scale(0.8);\n  }\n"]);return te=function(){return e},e}function oe(){var e=Object(Q.a)(["\n  0% {\n    opacity: 0;\n    transform: scale(1);\n  }\n\n  100% {\n    opacity: 1;\n    transform: scale(1);\n  }\n"]);return oe=function(){return e},e}var re=function(e,n){return n<e},ie=function(e,n){return!re(e,n)},ae=Object(L.b)(oe()),ce=Object(L.b)(te()),se={box:{":-webkit-full-screen-ancestor":{animation:"none",animationFillMode:"none",willChange:"unset"},backgroundColor:z,borderRadius:16,boxShadow:"0 0 24px rgba(0, 0, 0, 0.18)",margin:"auto",animationName:ae,animationDuration:"300ms",animationFillMode:"forwards",animationTimingFunction:"ease-out",padding:40,overflow:"hidden",willChange:"transform",WebkitTapHighlightColor:"rgba(0,0,0,0)"},boxExit:{animationName:ce,animationDuration:"".concat($,"ms"),animationFillMode:"forwards",animationTimingFunction:"ease-out"},scrollingContainer:{overflowY:"auto",padding:32,width:"100%",height:"100%",boxSizing:"border-box",WebkitOverflowScrolling:"touch",display:"flex",alignItems:"flex-start",":focus":{outline:"none"}}},le=function(e){Object(I.a)(t,e);var n=Object(B.a)(t);function t(){var e;Object(R.a)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).scrollingContainer=Object(r.createRef)(),e.handleCloseButtonClick=function(){e.props.onClose()},e.handleOverlayClick=function(){e.props.closeOnOverlayTap&&e.props.onClose()},e.handleKeyDown=function(n){n.stopPropagation(),27===n.keyCode&&(n.preventDefault(),e.props.onClose())},e.handleTouchStart=function(n){e.startY=n.touches[0].clientY},e.handleTouchMove=function(n){if(null!=e.scrollingContainer.current){var t=n.touches[0].clientY;e.scrollingContainer.current.scrollHeight!==e.scrollingContainer.current.clientHeight?(0===e.scrollingContainer.current.scrollTop&&ie(e.startY,t)||null!=e.scrollingContainer.current&&e.scrollingContainer.current.scrollTop+e.scrollingContainer.current.clientHeight>=e.scrollingContainer.current.scrollHeight&&re(e.startY,t))&&n.preventDefault():n.preventDefault()}},e.scrollToTop=function(){var n=e.scrollingContainer.current;null!=n&&n.scrollTo({top:0,behavior:"smooth"})},e}return Object(_.a)(t,[{key:"componentDidMount",value:function(){null!=this.scrollingContainer.current&&this.scrollingContainer.current.focus()}},{key:"render",value:function(){return Object(H.b)(ne,{animateClose:this.props.animateClose,children:Object(H.b)("div",{css:se.scrollingContainer,ref:this.scrollingContainer,onClick:this.handleOverlayClick,onTouchStart:this.handleTouchStart,onTouchMove:this.handleTouchMove,tabIndex:"0",onKeyDown:this.handleKeyDown,children:Object(H.b)("div",{id:"modal",css:[se.box,Boolean(this.props.animateClose)&&se.boxExit,{width:this.props.width||600,maxWidth:this.props.width||600}],onClick:function(e){return e.stopPropagation()},children:this.props.children})})})}}]),t}(r.Component);le.defaultProps={closeOnOverlayTap:!1};var ue=le,de=k.a.div({display:"flex",flexDirection:"column"});function he(e){var n=e.children,t=e.isCentered;return Object(H.b)(de,{css:t?{alignItems:"center",textAlign:"center"}:{},children:n})}var pe=k.a.div((function(e){return Object(W.a)({flexShrink:0,height:e.size,width:e.size},e.grow?{flexGrow:1}:{})}));var be=function(e){var n=e.children,t=e.isCentered,o=void 0!==t&&t;return Object(H.c)(i.a.Fragment,{children:[Object(H.b)(pe,{size:40}),Object(H.b)("div",{css:{display:"flex",justifyContent:o?"center":"flex-start","> a, > button":{minWidth:164}},children:n})]})},fe=function(e){Object(I.a)(t,e);var n=Object(B.a)(t);function t(){var e;Object(R.a)(this,t);for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i))).state={isOpen:!1,animateClose:!1},e.modal=Object(r.createRef)(),e.scrollToTop=function(){var n=e.modal.current;null!=n&&n.scrollToTop()},e.openModal=function(){e.setState((function(e){return Object(W.a)(Object(W.a)({},e),{},{isOpen:!0})}))},e.closeModal=function(){e.setState((function(e){return Object(W.a)(Object(W.a)({},e),{},{animateClose:!0})})),window.setTimeout((function(){e.setState((function(e){return Object(W.a)(Object(W.a)({},e),{},{animateClose:!1,isOpen:!1})})),e.props.onExitAnimationEnd&&e.props.onExitAnimationEnd()}),$)},e}return Object(_.a)(t,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.openModal()}},{key:"componentDidUpdate",value:function(e){this.props.isOpen&&!e.isOpen?this.openModal():!this.props.isOpen&&e.isOpen&&this.closeModal()}},{key:"render",value:function(){return Object(o.jsx)(q,{isOpen:this.state.isOpen,hasScrollPrevention:!0,children:Object(o.jsx)(ue,Object(W.a)(Object(W.a)({},this.props),{},{animateClose:this.state.animateClose,ref:this.modal}))})}}]),t}(r.Component);fe.defaultProps={closeOnOverlayTap:!0};var ve=fe,Oe=k.a.button(Object(W.a)(Object(W.a)({alignItems:"center",backgroundColor:T,border:"none",borderRadius:8,color:z,display:"flex",flexShrink:0,fontSize:16,fontWeight:600,justifyContent:"center",margin:0,outline:"none",padding:16},{cursor:"pointer",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",WebkitTouchCallout:"none"}),{},{textDecoration:"none",webkitAppearance:"none",mozAppearance:"none"})),je=function(e){var n=e.children,t=e.onClick;return Object(o.jsx)(Oe,{onClick:t,children:n})},me=t(37),ge=t.n(me),Ce=t(41),xe=ge.a.mark((function e(n){return ge.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ce.a)(b,(function(e){e.author=n.username,n.socket.send(JSON.stringify(e))}));case 2:case"end":return e.stop()}}),e)})),ye=k.a.div({color:D,fontSize:32,fontWeight:600}),Se=k.a.div({color:D,fontSize:20}),we=k.a.input({width:"100%",height:"100%",outline:"none",padding:12,backgroundColor:N,border:"none",borderRadius:8,textAlign:"center"}),ke=function(){var e=i.a.useState(!0),n=Object(E.a)(e,2),t=n[0],r=n[1],a=i.a.useState(""),c=Object(E.a)(a,2),s=c[0],l=c[1];return Object(o.jsxs)(ve,{isOpen:t,onClose:function(){},closeOnOverlayTap:!1,children:[Object(o.jsxs)(he,{isCentered:!0,children:[Object(o.jsx)(ye,{children:"Welcome!"}),Object(o.jsx)(pe,{size:24}),Object(o.jsx)(Se,{children:"What's your name?"}),Object(o.jsx)(pe,{size:20}),Object(o.jsx)(we,{value:s,onChange:function(e){return l(e.target.value)},placeholder:"Enter your name here"})]}),Object(o.jsx)(be,{isCentered:!0,children:Object(o.jsx)(je,{onClick:function(){if(""!==s){r(!1);var e=y(w.dispatch,s);S.run(xe,{socket:e,username:s})}},children:"Submit"})})]})},Ee=k.a.div({display:"flex",flexDirection:"column-reverse",borderBottom:"1px solid ".concat(F),marginTop:20,padding:"0 20px 20px 20px",height:"100%",overflow:"auto"}),Te=k.a.div({padding:12,borderRadius:16,width:"fit-content",maxWidth:400}),De=k.a.div({fontSize:16,fontWeight:600}),Ne=k.a.div({fontSize:16}),Fe=Object(s.b)((function(e){return{messages:e.messages,user:e.user}}),{})((function(e){var n=e.messages,t=e.user;return Object(H.b)(Ee,{children:Object(H.b)("div",{children:n.map((function(e,o){var r=o>0?n[o-1]:null,a=(null===r||void 0===r?void 0:r.author.id)===e.author.id,c=e.author.id===t.id;return Object(H.c)(i.a.Fragment,{children:[0!==o&&Object(H.b)(pe,{size:a?4:16}),Object(H.c)("div",{css:{display:"flex"},children:[c&&Object(H.b)(pe,{grow:!0,size:16}),Object(H.c)(Te,{css:{backgroundColor:c?T:N,color:c?z:D},children:[!c&&Object(H.c)(H.a,{children:[Object(H.b)(De,{children:e.author}),Object(H.b)(pe,{size:4})]}),Object(H.b)(Ne,{children:e.message})]})]})]},e.id)}))})})})),ze=k.a.div({padding:24,height:"100%",width:400,borderRight:"1px solid ".concat(F),flexShrink:0}),Pe=k.a.div({maxHeight:"100%",overflow:"auto"}),Ae=k.a.div({color:D,fontSize:32,fontWeight:600}),Me=k.a.div({color:D,fontSize:24}),We=Object(s.b)((function(e){return{user:e.user,users:e.users}}),{})((function(e){var n,t=e.users,r=e.user;return Object(o.jsxs)(ze,{children:[Object(o.jsxs)(Ae,{children:["Users (",t.length||1,")"]}),Object(o.jsx)(pe,{size:32}),Object(o.jsx)(Me,{children:null!==(n=null===r||void 0===r?void 0:r.name)&&void 0!==n?n:"You"}),t.length>1&&Object(o.jsx)(pe,{size:12}),Object(o.jsx)(Pe,{children:t.map((function(e,n){return Object(o.jsx)(i.a.Fragment,{children:(null===r||void 0===r?void 0:r.id)!==e.id&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Me,{children:e.name}),n!==t.length-1&&Object(o.jsx)(pe,{size:12})]})},e.id)}))})]})})),Re=k.a.div({height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),_e=k.a.div({display:"flex",flexDirection:"column",width:"100%",height:"100%"});var Ie=function(){return Object(o.jsxs)(Re,{children:[Object(o.jsx)(ke,{}),Object(o.jsx)(We,{}),Object(o.jsxs)(_e,{children:[Object(o.jsx)(Fe,{}),Object(o.jsx)(M,{})]})]})},Be=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,56)).then((function(n){var t=n.getCLS,o=n.getFID,r=n.getFCP,i=n.getLCP,a=n.getTTFB;t(e),o(e),r(e),i(e),a(e)}))};u.a.load({google:{families:["Jost:400","Jost:500","Jost:600","sans-serif"]}}),c.a.render(Object(o.jsx)(s.a,{store:w,children:Object(o.jsx)(Ie,{})}),document.getElementById("root")),Be()}},[[55,1,2]]]);
//# sourceMappingURL=main.4775dbe5.chunk.js.map